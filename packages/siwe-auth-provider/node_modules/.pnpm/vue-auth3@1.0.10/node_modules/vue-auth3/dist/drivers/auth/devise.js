"use strict";Object.defineProperty(exports, "__esModule", {value: true});

var _chunkJYEQ26SRjs = require('../../chunk-JYEQ26SR.js');
require('../../chunk-6L3WGN24.js');

// src/drivers/auth/devise.ts
var devise_default = _chunkJYEQ26SRjs.defineAuthDriver.call(void 0, {
  tokens: [
    "Token-Type",
    "Access-Token",
    "Client",
    "Uid",
    "Expiry",
    "token-type",
    "access-token",
    "client",
    "uid",
    "expiry"
  ],
  request(auth, options, token) {
    var _a;
    const headers = {}, tokens = token.split("|");
    (_a = auth.options.drivers.auth.tokens) == null ? void 0 : _a.forEach((tokenName, index) => {
      if (tokens[index]) {
        headers[tokenName] = tokens[index];
      }
    });
    Object.assign(options.headers, headers);
    return options;
  },
  response(auth, { headers }) {
    var _a;
    const token = [];
    if (headers["access-token"] || headers["Access-Token"]) {
      (_a = auth.options.drivers.auth.tokens) == null ? void 0 : _a.forEach((tokenName) => {
        if (headers[tokenName]) {
          token.push(headers[tokenName]);
        }
      });
      const tokenNow = auth.token();
      if (!tokenNow || parseInt(token[4], 10) >= parseInt(tokenNow.split("|")[4], 10)) {
        return token.join("|");
      }
    }
    return null;
  }
});


exports.default = devise_default;
//# sourceMappingURL=devise.js.map